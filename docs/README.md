# <center>医学图像Python库编程规范</center >
## 标准的指导思想
### 优美胜于丑陋：
python 以编写优美的代码为目标，注意编写的美观。
### 明了胜于晦涩：
优美的代码应当是明了的，命名规范，风格相似，不要为了追求技巧而使语言晦涩难懂。
### 简洁胜于复杂：
优美的代码应当是简洁的，不要有复杂的内部实现，将复杂的功能分解为简单的模块。
### 复杂胜于凌乱：
如果复杂不可避免，那代码间也不能有难懂的关系，要保持接口简洁。
### 扁平胜于嵌套：
优美的代码应当是扁平的，不能有太多的嵌套。
### 间隔胜于紧凑：
优美的代码有适当的间隔，不要奢望一行代码解决问题。
### 可读性很重要：
优美的代码是可读的，易读性非常重要。

## 代码布局方式及书写规范
### 制表符或空格
我们建议选择空格作为最优先的缩进方式。

Python 3不允许混合使用制表符和空格来缩进。Python 2的代码中混合使用制表符和空格的缩进，应该转化为完全使用空格。

调用python命令行解释器时使用-t选项,可对代码中不合法的混合制表符和空格发出警告(warnings)。使用-tt时警告(warnings)将变成错误(errors)。

这些选项可被用来检测是否混用制表符和空格，我们推荐编程时使用上述选项。

### 代码换行问题
一般，一个命令即一句代码占用一行。在遇到代码超长的情况下为了代码的美观及方便测试，会涉及到代码的换行问题。
#### Python字符串换行的三种方式：
> 第一种：三个单引号
```python
print (''' 我是一个程序员
           我刚开始学习python''')
```
> 第二种：三个双引号
```python
print (""" 我是一个程序员
           我刚开始学习python""")
```
> 第三种：\结尾
```python
print ("我是一个程序员，\
        我刚开始学python")
```
> () {}  []中不需要特别加换行符：
```python
test2 = ('csdn '
'cssdn')
```

#### if语句条件块太长需要写成多行：

值得注意的是两个字符组成的关键字（例如if），加上一个空格，加上开括号，为后面的多行条件创建了一个4个空格的缩进。这会给嵌入if内的缩进语句产生视觉冲突，因为它们也被缩进4个空格。

#### 多行结构中的换行问题：

多行结构中的结束花括号/中括号/圆括号应该是最后一行的第一个非空白字符或者是最后一行的第一个字符。
```python
my_list = [
    1, 2, 3,
    4, 5, 6,
    ]

result = some_function_that_takes_arguments(
    'a', 'b', 'c',
    'd', 'e', 'f',
    )
```
### 行的最长长度
我们建议每行最大行宽不超过 80 个字符。
### 空格在表达式中的运用
#### 各种括号内不要加空格

>Yes: spam(ham[1], {eggs: 2})

>No:  spam( ham[ 1 ], { eggs: 2 } )

#### 逗号、冒号、分号前不要加空格，但是他们后面可以加
>Yes: if x == 4: print x, y; x, y = y, x

>No:  if x == 4 : print x , y ; x , y = y , x

#### 函数的左括号前不要加空格
>Yes: spam(1)

>No:  spam (1)

#### 序列的左括号前不要加空格
> Yes: dict['key'] = list[index]

> No:  dict ['key'] = list [index]

#### 操作符左右各加一个空格，不要为了对齐增加空格
> Yes: x = 1

> No:  x=1

#### 函数默认参数使用的赋值符左右省略空格
> Yes: def complex(real, imag=0.0):

> No:  def complex(real, imag = 0.0):

### 空行的使用
1. 两行空行用于分割顶层函数和类的定义
2. 单个空行用于分割类定义中的方法
3. 函数内逻辑无关段落之间空一行

## 注释规范
### 代码整体功能说明
整体功能的描述一般放置在代码最开头的注释中，用于对代码整体实现的功能进行阐述，以便于他人了解。

注意描述内容不要过于长，过于繁琐，让读者知道你的代码的编写目的就好。至于代码中具体某部分实现的功能，可用块注释进行解释。

Python代码的整体注释是以多行注释组成的，为区别于单行注释，建议使用三引号注释法注释。
```python
"""
Script Name	 : 
Author		 : 
Created		 : 
Last Modified    : 
Version		 : 
Modifications    :
Description	 : 
""" 
```
### 代码的块注释
最需要写注释的是代码中那些技巧性的部分。

如果你在下次代码审查的时候必须解释一下，那么你应该现在就给它写注释。

对于复杂的操作，应该在其操作开始前写上若干行注释。
```python
# We use a weighted dictionary search to find out where i is in
# the array.  We extrapolate position based on the largest num
# in the array and the array size and then do binary search to
# get the exact number.
# param para1: 第一个参数的意义
# param para2: 第二个参数的意义
# param para3: 第三个参数的意义
# rtype:
# return:
# func:
```
另一方面, 不要描述代码，只需要对代码的功能，特殊的命名等你认为需要解释的部分加以阐述，以便他人快速阅读及自己修改使用。

同时，块注释应当与函数或类对齐，以使代码简洁美观。
### 单行注释
我们建议对于不是一目了然的代码, 在其行尾添加注释。
```python
NULL_BALLOT = Ballot(-1, -1)  # sorts before all real ballots
```

## 命名规则
### 名称的英文缩写
1. 常用的缩写，如XML、ID等，在命名时也应只大写首字母，如XmlParser。 
2. 命名中含有长单词，对某个单词进行缩写。这时应使用约定成俗的缩写方式。 

>例如： 

- function 缩写为 func 
- text 缩写为 txt 
- object 缩写为 obj 
- count 缩写为 cnt 
- number 缩写为 num 

### 变量的命名
#### 全局变量
使用大写字母，单词之间用'_'分割，比如 
>NUMBER 

>COLOR_WRITE 

而如果这个变量是内部的，那么在变量名前加'_'
>_COLOR_WRITE

所谓"内部(Internal)"表示仅模块内可用，或者，在类内是保护或私有的。
#### 其他变量
包括局部变量,实例变量，静态变量。

使用小写字母，单词之间用_分割，比如
>this_is_a_var

同样，如果这个变量是内部的，那么在变量名前加'_'
>_this_is_a_var

### 类的命名
单词首字母大写，即大驼峰命名法
> AdStats 

> ConfigUtil 

如果这个类是内部的，那么在类名前加'_'
>_ConfigUtil

### 函数的命名
使用小写字母，单词之间用_分割：
>get_name() 

>count_number()  

同样，如果这个函数是内部的，那么在函数名前加'_'
>_get_name()

### 常用缩写名称附录
> 例如：

- dst = destination 
- src = source
- (未完待续)


## 其他建议

### 关于main()函数的使用

即使是一个打算被用作脚本的文件, 也应该是可导入的. 并且简单的导入不应该导致这个脚本的主功能(main functionality)被执行, 这是一种副作用. 主功能应该放在一个main()函数中.
你的代码应该在执行主程序前总是检查 ``if __name__ == '__main__'`` , 这样当模块被导入时主程序就不会被执行.
```python
def main()：
    ...
if __name__ == '__main__':
    main()
```